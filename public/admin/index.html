<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>CMS Admin - hgaruna</title>
    <link rel="icon" href="/logos-he-imagenes/logo3.png" />

    <!-- Estilos personalizados para el CMS -->
    <link rel="stylesheet" href="/admin/cms-styles.css" />

    <!-- Netlify Identity Widget -->
    <script src="https://identity.netlify.com/v1/netlify-identity-widget.js"></script>
  </head>
  <body>
    <!-- Include the script that builds the page and powers Netlify CMS -->
    <script src="https://unpkg.com/netlify-cms@^2.0.0/dist/netlify-cms.js"></script>

    <!-- Configuración personalizada del CMS -->
    <script>
      // Configurar el CMS con branding personalizado
      CMS.init({
        config: {
          backend: {
            name: "git-gateway",
            branch: "main",
          },
          load_config_file: true,
          display_url: "https://service.hgaruna.org",
          logo_url: "/logos-he-imagenes/logo3.png",
          site_url: "https://service.hgaruna.org",
        },
      });

      // Personalización adicional cuando el CMS esté listo
      CMS.registerEventListener({
        name: "preinit",
        handler: () => {
          // Agregar meta tag para el tema
          const meta = document.createElement("meta");
          meta.name = "theme-color";
          meta.content = "rgb(37, 99, 235)";
          document.head.appendChild(meta);

          // Personalizar el título de la página
          document.title = "hgaruna CMS - Admin Panel";
        },
      });
    </script>

    <!-- Netlify Identity initialization -->
    <script>
      if (window.netlifyIdentity) {
        window.netlifyIdentity.on("init", (user) => {
          if (!user) {
            window.netlifyIdentity.on("login", () => {
              document.location.href = "/admin/";
            });
          }
        });
      }
    </script>
  </body>
</html>
