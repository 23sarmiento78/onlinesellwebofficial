<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>CMS Admin - hgaruna</title>

    <!-- Netlify Identity Widget -->
    <script src="https://identity.netlify.com/v1/netlify-identity-widget.js"></script>
  </head>
  <body>
    <!-- Include the script that builds the page and powers Netlify CMS -->
    <script src="https://unpkg.com/netlify-cms@^2.0.0/dist/netlify-cms.js"></script>

    <!-- Netlify Identity initialization -->
    <script>
      if (window.netlifyIdentity) {
        window.netlifyIdentity.on("init", (user) => {
          if (!user) {
            window.netlifyIdentity.on("login", () => {
              document.location.href = "/admin/";
            });
          }
        });
      }
    </script>
    <div id="admin-app" class="admin-layout" style="display: none">
      <aside class="sidebar social-sidebar">
        <div class="sidebar-header">
          <img
            src="/logos-he-imagenes/logo-sell.png"
            alt="Logo"
            class="sidebar-logo"
          />
          <h2>Admin</h2>
        </div>
        <nav class="sidebar-nav">
          <ul>
            <li>
              <a href="#" class="active"
                ><i class="fa-solid fa-house"></i> Inicio</a
              >
            </li>
            <li>
              <a href="#article-form"
                ><i class="fa-solid fa-pen"></i> Nuevo Artículo</a
              >
            </li>
            <!-- Eliminado: Nuevo Post Foro -->
            <li>
              <a href="#"><i class="fa-solid fa-user-group"></i> Comunidad</a>
            </li>
            <li>
              <a href="#"><i class="fa-solid fa-bell"></i> Notificaciones</a>
            </li>
          </ul>
        </nav>
        <div class="sidebar-user">
          <span id="user-email"></span>
          <button id="logout-btn" class="btn-filled">Cerrar sesión</button>
        </div>
      </aside>
      <main class="main-feed social-feed">
        <section class="feed-section">
          <h2>Feed de Artículos</h2>
          <div id="latest-articles" class="feed-list"></div>
        </section>
        <section class="feed-section">
          <!-- Eliminado: Feed del Foro -->
          <div id="latest-forum-posts" class="feed-list"></div>
        </section>
        <section class="form-section">
          <h3>Crear Artículo</h3>
          <form id="article-form">
            <label
              >Título:<br /><input
                type="text"
                id="article-title"
                required /></label
            ><br />
            <label
              >Contenido:<br /><textarea
                id="article-content"
                required
              ></textarea></label
            ><br />
            <label
              >Autor:<br /><input
                type="text"
                id="article-author"
                required /></label
            ><br />
            <label
              >Descripción SEO:<br /><input
                type="text"
                id="article-seo-description"
                maxlength="160"
                required /></label
            ><br />
            <label
              >Palabras clave SEO (separadas por coma):<br /><input
                type="text"
                id="article-seo-keywords"
                required /></label
            ><br />
            <label
              >Imagen destacada (URL):<br /><input
                type="url"
                id="article-image" /></label
            ><br />
            <button type="submit" class="btn-filled">Publicar artículo</button>
          </form>
          <div id="article-result"></div>
        </section>
        <section class="form-section">
          <!-- Eliminado: Crear Publicación en el Foro -->
          <form id="forum-form">
            <label
              >Título:<br /><input
                type="text"
                id="forum-title"
                required /></label
            ><br />
            <label
              >Contenido:<br /><textarea
                id="forum-content"
                required
              ></textarea></label
            ><br />
            <label
              >Autor:<br /><input
                type="text"
                id="forum-author"
                required /></label
            ><br />
            <label
              >Etiquetas (separadas por coma):<br /><input
                type="text"
                id="forum-tags" /></label
            ><br />
            <!-- Eliminado: Botón Publicar en el foro -->
          </form>
          <div id="forum-result"></div>
        </section>
      </main>
      <aside class="metrics-panel social-widgets">
        <h2>Panel Social</h2>
        <div class="widget-box">
          <button class="btn-filled" disabled>
            <i class="fa-brands fa-linkedin"></i> Conectar LinkedIn
          </button>
        </div>
        <div class="widget-box">
          <button class="btn-outline" disabled>
            <i class="fa-solid fa-user-plus"></i> Invitar usuario
          </button>
        </div>
        <div class="widget-box">
          <button class="btn-outline" disabled>
            <i class="fa-solid fa-chart-line"></i> Ver estadísticas
          </button>
        </div>
        <div class="widget-box">
          <button class="btn-outline" disabled>
            <i class="fa-solid fa-gear"></i> Configuración
          </button>
        </div>
        <div id="metrics-content">
          <p>Próximamente: integración con Analytics y más widgets sociales.</p>
        </div>
      </aside>
    </div>
    <!-- Modal para mostrar artículo completo -->
    <div
      id="article-modal"
      style="
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100vw;
        height: 100vh;
        background: rgba(0, 0, 0, 0.6);
        z-index: 9999;
        align-items: center;
        justify-content: center;
      "
    >
      <div
        style="
          background: #fff;
          max-width: 600px;
          width: 90vw;
          margin: auto;
          border-radius: 8px;
          padding: 24px;
          position: relative;
          box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
        "
      >
        <button
          class="modal-close"
          style="
            position: absolute;
            top: 12px;
            right: 12px;
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
          "
        >
          &times;
        </button>
        <h2 class="modal-title" style="margin-top: 0"></h2>
        <div
          class="modal-meta"
          style="color: #666; font-size: 0.95em; margin-bottom: 8px"
        >
          <span class="modal-author"></span> | <span class="modal-date"></span>
        </div>
        <div
          class="modal-content"
          style="white-space: pre-line; margin-bottom: 16px"
        ></div>
      </div>
    </div>
    <!-- Fin modal artículo -->
    <script src="/js/admin-app-new.js"></script>
  </body>
</html>
