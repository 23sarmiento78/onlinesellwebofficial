---
import { Markdown } from 'astro/components';
import ArticleLayout from '../../layouts/ArticleLayout.astro';

export async function getStaticPaths() {
  const modules = await Astro.glob('./src/content/articulos/*.md');
  return modules.map((mod) => ({ params: { slug: mod.file.split('/').pop().replace('.md', '') } }));
}

const { slug } = Astro.params;
const modules = await Astro.glob('./src/content/articulos/*.md');
const file = modules.find((mod) => mod.file.includes(`${slug}.md`));
const frontmatter = file?.frontmatter || {};
const content = file ? await file.rawContent() : '';
---

<ArticleLayout title={frontmatter.title} description={frontmatter.description} image={frontmatter.image}>
  <Markdown content={content} />
</ArticleLayout>
